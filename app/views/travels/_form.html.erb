<div>
<%= form_with(model: [@current_enrollment, @travel], 
                html: {local: true},
                data: {
                  controller: "travel",
                  target: "travel.form",
                  action: "submit->travel#submitForm"
                }
              ) do |form| %>
  <% if @travel.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@travel.errors.count, "error") %> prohibited this travel from being saved:</h2>
      <ul>
        <% @travel.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="text-sm">
    <span>
      PLEASE NOTE:  If you are no longer in need of the shuttle service you may have selected in your MMSS application, 
      or if you have any questions about shuttle service, please email mmss@umich.edu as soon as possible.
    </span>
    <div class="py-2">
      All fields are required unless marked <span class="text-gray-700">(optional)</span>
    </div>
    <hr>
    <%= form.label 'travel[arrival_session]', 'Session of Arrival *' %>
    <div class="form-check">
      <% @sessions.each_with_index do |s, index| %>
        <div>
          <% if index == 0 %>
            <input class="form-check-input appearance-none rounded-full h-4 w-4 border border-gray-600 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
            type="radio" name="travel[arrival_session]" id="<%= s %>" value="<%= s %>" 
            <%= radio_button_checked(@travel, "arrival_session", s) %> required >
          <% else %>
            <input class="form-check-input appearance-none rounded-full h-4 w-4 border border-gray-600 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
              type="radio" name="travel[arrival_session]" id="<%= s %>" value="<%= s %>"
              <%= radio_button_checked(@travel, "arrival_session", s) %> >
          <% end %>
          <label class="form-check-label inline-block text-gray-800" for="<%= s %>">
            <%= s %>
          </label>
        </div>
      <% end %>
    </div>
    <hr>

    <%= form.label 'travel[depart_session]', 'Session of Departure *' %>
    <div class="form-check">
      <% @sessions.each_with_index do |s, index| %>
        <div>
          <% if index == 0 %>
            <input class="form-check-input appearance-none rounded-full h-4 w-4 border border-gray-600 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
              type="radio" name="travel[depart_session]" id="<%= s %>" value="<%= s %>" 
              <%= radio_button_checked(@travel, "depart_session", s) %> required>
          <% else %>
            <input class="form-check-input appearance-none rounded-full h-4 w-4 border border-gray-600 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
            type="radio" name="travel[depart_session]" id="<%= s %>" value="<%= s %>"
            <%= radio_button_checked(@travel, "depart_session", s) %> >
          <% end %>
          <label class="form-check-label inline-block text-gray-800" for="<%= s %>">
            <%= s %>
          </label>
        </div>
      <% end %>
    </div>
    <h2 class= "section-header">Arrival Information</h2>
    <span>
      Please indicate what type of transportation you will use to arrive to Michigan *
    </span>
    <%= form.label 'travel[arrival_transport]', class: "hidden" %>
    <div class="form-check my-2">
      <% transportation.each_with_index do |t, index| %>
        <div>
          <% if index == 0 %>
            <input class="form-check-input appearance-none rounded-full h-4 w-4 border border-gray-600 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
              type="radio" name="travel[arrival_transport]" id="<%= t %>" value="<%= t %>" 
              <%= radio_button_checked(@travel, "arrival_transport", t) %> required data-target="travel.arrival_transport" data-action="click->travel#checkArrivalTransport" >
          <% else %>
            <input class="form-check-input appearance-none rounded-full h-4 w-4 border border-gray-600 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
              type="radio" name="travel[arrival_transport]" id="<%= t %>" value="<%= t %>"
              <%= radio_button_checked(@travel, "arrival_transport", t) %> data-target="travel.arrival_transport" data-action="click->travel#checkArrivalTransport">
          <% end %>
          <label class="form-check-label inline-block text-gray-800" for="<%= t %>">
            <%= t %>
          </label>
        </div>
      <% end %>
    </div>
    <hr>

    <% if @travel.new_record? %>
      <div class="travel-details--hide" data-target="travel.arrival_details">
    <% elsif @travel.arrival_transport.include?("Automobile") || @travel.arrival_transport.include?("commuter") %>
      <div class="travel-details--hide" data-target="travel.arrival_details">
    <% else %>
      <div class="travel-details--show" data-target="travel.arrival_details">
    <% end %>
      <span>
        Carrier Name. Airline: (Delta, United, Spirit, etc.), Bus (Greyhound), Train (Amtrak) *
      </span>
      <div class="field py-2">
        <%= form.label :arrival_carrier, class: "hidden" %>
        <%= form.text_field :arrival_carrier %>
      </div>
      <hr>

      <span>
        Arrival Flight #/Bus #/Train # (Ex: Delta 0025) *
      </span>
      <div class="field py-2">
        <%= form.label :arrival_route_num, class: "hidden" %>
        <%= form.text_field :arrival_route_num %>
      </div>
      <hr>
    </div>
    <div class="travel-details--hide" data-target="travel.arrival_date_time">
      <div class="field py-2 w-full md:w-1/3">
        <%= form.label :arrival_date, 'Date of arrival *' %>
        <%= form.date_field :arrival_date, class: "datepicker", "data-target": "travel.arrival", "data-action": "change->travel#checkDates" %>
      </div>
      <hr>

      <div class="field py-2 w-full md:w-1/3">
        <%= form.label :arrival_time, 'Time of arrival *' %>
        <%= form.time_field :arrival_time %>
      </div>
    </div>

    <h2 class= "section-header">Departure Information</h2>
    <span>
      Please indicate what type of transportation you will use to depart from Michigan *
    </span>

    <%= form.label 'travel[depart_transport]', class: "hidden" %>
    <div class="form-check">
      <% transportation.each_with_index do |t, index| %>
        <div>
          <% if index == 0 %>
            <input class="form-check-input appearance-none rounded-full h-4 w-4 border border-gray-600 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
              type="radio" name="travel[depart_transport]" id="<%= t %>" value="<%= t %>" 
              <%= radio_button_checked(@travel, "depart_transport", t) %> required data-target="travel.depart_transport" data-action="click->travel#checkDepartTransport">
          <% else %>
            <input class="form-check-input appearance-none rounded-full h-4 w-4 border border-gray-600 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
              type="radio" name="travel[depart_transport]" id="<%= t %>" value="<%= t %>"
              <%= radio_button_checked(@travel, "depart_transport", t) %> data-target="travel.depart_transport" data-action="click->travel#checkDepartTransport">
          <% end %>
          <label class="form-check-label inline-block text-gray-800" for="<%= t %>" >
            <%= t %>
          </label>
        </div>
      <% end %>
    </div>
    <hr>
    <% if @travel.new_record? %>
      <div class="travel-details--hide" data-target="travel.depart_details">
    <% elsif @travel.depart_transport.include?("Automobile") || @travel.depart_transport.include?("commuter") %>
      <div class="travel-details--hide" data-target="travel.depart_details">
    <% else %>
      <div class="travel-details--swow" data-target="travel.depart_details">
    <% end %>
      <span>
        Carrier Name. Airline: (Delta, United, Spirit, etc.), Bus (Greyhound), Train (Amtrak) *
      </span>
      <div class="field">
        <%= form.label :depart_carrier, class: "hidden" %>
        <%= form.text_field :depart_carrier %>
      </div>
      <hr>

      <span>
        Departure Flight #/Bus #/Train # (Ex: Delta 0025) *
      </span>
      <div class="field">
        <%= form.label :depart_route_num, class: "hidden" %>
        <%= form.text_field :depart_route_num %>
      </div>
      <hr>
    </div>
    <div class="travel-details--hide" data-target="travel.depart_date_time">
      <div class="field py-2 w-full md:w-1/3" >
        <%= form.label :depart_date, 'Date of departure *' %>
        <%= form.date_field :depart_date, class: "datepicker", "data-target": "travel.depart", "data-action": "change->travel#checkDates" %>
      </div>
      <div class="errors date-error--hide" data-target="travel.message">
      </div>
      <hr>

      <div class="field py-2 w-full md:w-1/3">
        <%= form.label :depart_time, 'Time of departure *' %>
        <%= form.time_field :depart_time %>
      </div>
      <hr>
    </div>

    <div class="field">
      <%= form.label :note, 'Additional notes' %>
      <%= form.text_area :note %>
    </div>
    <hr>

    <div class="actions">
      <%= form.submit %>
    </div>
  </div>
<% end %>
</div>
